{# include base layout #}
{% extends "BackEndBundle::base.html.twig" %}
{# page title #}
{% block title %}{{ post.title }}{% endblock %}
{# body content #}
{% block body %}
{# Flashbag container #}
<div class="row">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        {% if app.session.flashBag.has('success') %}
        <div class="alert alert-success">
            {% for msg in app.session.flashBag.get('success') %}
                {{ msg }}
            {% endfor %}
        </div>
    {% endif %}
</div>

<div class="row">
    {{ form_start(form) }}
    <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            {{ form_widget(form.title) }}
        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            {{ form_widget(form.body) }}
        </div>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <ul class="bo list-group">
                <li class="list-group-item active text-uppercase">Publish options</li>
                <li class="list-group-item">
                    <span class="glyphicon glyphicon-bookmark" aria-hidden="true"></span> 
                    <span class="txt-span">Is published</span>
                    <span class="badge {% if post.isPublished %}green-bg{% else %}red-bg{% endif %}">
                        {% if post.isPublished %}Yes{% else %}No{% endif %}
                    </span>
                </li>
                <li class="list-group-item">
                    <span class="glyphicon glyphicon-check" aria-hidden="true"></span> 
                    <span class="txt-span">Is approved</span>
                    <span class="badge {% if post.isApproved %}green-bg{% else %}red-bg{% endif %}">
                        {% if post.isApproved %}Yes{% else %}No{% endif %}
                    </span>
                </li>
                <li class="list-group-item">
                    <span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span> 
                    <span class="txt-span">Likes</span>
                    <span class="badge">{{ post.likes }}</span>
                </li>
                <li class="list-group-item">
                    <span class="glyphicon glyphicon-share-alt" aria-hidden="true"></span> 
                    <span class="txt-span">Shares</span>
                    <span class="badge">{{ post.shares }}</span>
                </li>

                <li class="list-group-item btn-container">
                    <button class="btn btn-default bo-orange-btn" type="submit" name="publish" value="0">Move to Draft</button>
                    <button class="btn btn-default bo-primary-btn text-uppercase" type="submit" name="publish" value="1">Publish</button>
                </li>
            </ul>

            <ul class="bo list-group">
                <li class="list-group-item active text-uppercase">Picture</li>

                <li class="list-group-item img-container">
                    <img src="{{ asset(images_dir) }}{{post.image.fileName}}" alt="{{ post.title }}" class="image-form"/>
                </li>
                <li class="list-group-item btn-container">
                    {{ form_widget(form.image) }}
                    <button class="btn btn-default bo-orange-btn text-uppercase" type="button">Change post cover</button>
                </li>
            </ul>

            <ul class="bo list-group">
                <li class="list-group-item active text-uppercase">Categories</li>

                <li class="list-group-item btn-container">
                    {{ form_widget(form.category) }}
                </li>
            </ul>

            <ul class="bo list-group">
                <li class="list-group-item active text-uppercase">Tags</li>

                <li class="list-group-item btn-container">
                    {{ form_widget(form.tags) }}
                </li>
            </ul>
            {{ form_end(form) }}

            <ul class="bo list-group">
                <form action="{{ path('bo_delete_post', { 'id': post.id }) }}" method="post">
                    <input type="hidden" name="_method" value="DELETE" />
                    <button class="btn btn-default btn-block bo-red-btn text-uppercase" type="submit">
                        <span class="glyphicon glyphicon glyphicon-trash" aria-hidden="true"></span> Delete post
                    </button>
                </form>
            </ul>
        </div>
    </div>
    
</div>

{% endblock %}