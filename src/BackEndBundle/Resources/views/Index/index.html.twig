{# include base layout #}
{% extends "BackEndBundle::base.html.twig" %}
{# page title #}
{% block title %}My space{% endblock %}
{# body content #}
{% block body %}
{# Flashbag container #}
<div class="row">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        {% if app.session.flashBag.has('success') %}
        <div class="alert alert-success">
            {% for msg in app.session.flashBag.get('success') %}
                {{ msg }}
            {% endfor %}
        </div>
    {% endif %}
</div>

<div class="row">
    <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
	            <ul class="bo list-group">
	                <li class="list-group-item active text-uppercase">My posts</li>
	            </ul>
        	</div>
            <div class="no-padding">
            {% for post in posts %}
	            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
	            	<div class="post-list-item">
	            		<div class="img" style="background: url({{ asset(images_dir) }}{{post.image.fileName}});background-size: cover;">
	            		</div>
	            		<div class="infos">
	            			<div class="stat">
	            				<span class="date-span">
	            					<span class="glyphicon glyphicon-time" aria-hidden="true"></span> 
	            					{{ post.created|date("d/m/Y", false) }}
	            				</span>
	            				<span class="pull-right stat-span">
	            					<span class="glyphicon glyphicon-certificate {% if post.isApproved %}green{% else %}red{% endif %}-txt" aria-hidden="true"></span>
	            					{% if post.isApproved %}Approved {% else %}Not Approved {% endif %}
	            				</span>
	            				<span class="pull-right stat-span">
	            					<span class="glyphicon glyphicon-certificate {% if post.isPublished %}green{% else %}red{% endif %}-txt" aria-hidden="true"></span>
	            					{% if post.isPublished %}Published {% else %}Not Published {% endif %}
	            				</span>
	            			</div>
	            			<p class="title">{{ post.title }}</p>
	            			<p class="extract">{{ post.body|slice(0, 200) }}...</p>
	            		</div>
	            		<div class="btn-div">
	            			<a href="{{ path('bo_show_post', {'id': post.id}) }}">Edit this post</a>
	            			<span class="pull-right stat-span">
	            				<span class="glyphicon glyphicon-eye-open"></span> {{ post.likes }}
	            			</span>
	            			<span class="pull-right stat-span">
	            				<span class="glyphicon glyphicon-share-alt"></span> {{ post.shares }}
	            			</span>
	            		</div>
	            	</div>
				</div>
			{% endfor %}
			</div>

        </div>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <ul class="bo list-group">
                <li class="list-group-item active text-uppercase">Dashboard</li>
                <li class="list-group-item">
                    <span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span> 
                    <span class="txt-span">Likes</span>
                    <span class="badge">{{likes_count}}</span>
                </li>
                <li class="list-group-item">
                    <span class="glyphicon glyphicon-share-alt" aria-hidden="true"></span> 
                    <span class="txt-span">Shares</span>
                    <span class="badge">{{shares_count}}</span>
                </li>
            </ul>

            <a href="{{ path('bo_add_post')}}" class="btn btn-default btn-block bo-primary-btn text-uppercase">
            	<span class="glyphicon glyphicon-text-size" aria-hidden="true"></span> Write new post
            </a>

        </div>
    </div>
    
</div>

{% endblock %}